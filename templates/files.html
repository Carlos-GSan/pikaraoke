{% extends 'base.html' %}

{% block scripts %}
<script>
  $(function () {

    if ($(window).width() <= 500) {
      $(document).scroll(function() {
        var y = $(this).scrollTop();
        if (y > 100) {
          $('#alpha-bar').removeClass("mobile-hide");
          $('#alpha-bar').fadeIn();
        } else {
          $('#alpha-bar').fadeOut();
        }
      });
    }

  });

</script>

{% endblock %}

{% block header %}
<h1>{% block title %}{{ title }}{% endblock %}</h1>
<style>
  #alpha-bar {
    padding: 5px 10px;
    border-radius: 4px;
    margin-bottom: 10px;
    position: sticky;
    display: flex;
    justify-content: space-between;
    top: 3px;
  }
  @media screen and (max-width: 500px) {
    #alpha-bar {
      font-size: 13px;
      position: fixed;
      display: flex;
      align-items: center;
      right: 8px;
      top: 15px;
      flex-direction: column;
      max-width: 22px;
      height: 95vh;
    }
    .mobile-hide {
      visibility: hidden;
    }
  }
</style>
{% endblock %}

{% block content %}

<p>
  Sorted by "{{ sort_order }}" |
  {% if sort_order == "Alphabetical" %}
  <a href="{{ url_for('browse') }}?sort=date">Sort by Date</a>
  {% endif %}
  {% if sort_order == "Date" %}
  <a href="{{ url_for('browse') }}">Sort by Alphabetical</a>
  {% endif %}
</p>

<div id="alpha-bar" class="has-background-dark mobile-hide" >
  <a href="#">#</a>
  {% for letter in ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z']  %}
  <a href="#{{letter}}">{{letter}}</a>
  {% endfor %}
</div>

<table>
  {% for song in songs %}
  <tr value='{{ song }}'>
    <td width="20px" style="padding: 5px 0px">{{loop.index}}</td>
    <td id={{filename_from_path(song)[0].lower()}} width="20px" style="padding: 5px 0px">
      <a class='has-text-weight-bold has-text-success' title="Add '{{filename_from_path(song)}}' to queue"
        href="{{url_for('enqueue')}}?song={{url_escape(song.encode('utf-8'))}}"><i class="icon icon-list-add"></i> </a>
    </td>
    <td>
      {{filename_from_path(song)}}
    </td>
    {% if admin %}
      <td width="20px">
        <a class='edit-button' href="{{url_for('edit_file')}}?song={{url_escape(song.encode('utf-8'))}}"
          title="Edit song"><i class="icon icon-edit-1"></i> </a>
      </td>
    {% endif %}
    {% endfor %}
</table>





{% endblock %}